<html>
<head>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.bundle.min.js"></script>

</head>

<body>


<div id="radar-selectors" class="form-row">
  <div class="col">
    <select id="select_a" class="form-control"></select>
  </div>
  <div class="col">
    <select id="select_b" class="form-control"></select>
  </div>
</div>

<div id="radar-div"></div>

<script>
khateeb_data =   [['متوسط الكل',[10.32,30.48,14.24,15,10.32]],['أحمد بن حسين الفقيهي',[5.00,28.87,9.88,12,5.00]],['أحمد فريد',[4.25,37.55,12.26,14,4.25]],['أسامة بن عبد الله خياط',[12.88,23.66,13.89,7,12.88]],['إبراهيم بن محمد الحقيل',[9.50,31.26,15.33,25,9.50]],['إسماعيل الخطيب',[6.50,14.95,10.70,8,6.50]],['حسين بن عبد العزيز آل الشيخ',[12.75,30.57,11.42,10,12.75]],['حمزة بن فايع الفتحي',[9.25,25.24,12.59,22,9.25]],['خالد بن عبد الله المصلح',[5.63,27.57,17.57,10,5.63]],['خالد بن محمد الشارخ',[4.25,35.52,12.63,18,4.25]],['داود بن أحمد العلواني',[5.63,22.83,17.68,8,5.63]],['سعد بن عبد الله العجمة الغامدي',[14.75,47.59,25.89,20,14.75]],['سعود بن إبراهيم الشريم',[17.75,36.59,13.42,18,17.75]],['سعيد بن عبد الباري بن عوض',[5.50,29.70,11.44,15,5.50]],['سعيد بن يوسف شعلان',[7.75,39.34,14.87,23,7.75]],['صالح بن عبد الله الهذلول',[7.00,26.76,11.59,19,7.00]],['صالح بن عبد الله بن حميد',[17.88,36.26,13.21,19,17.88]],['صالح بن محمد آل طالب',[9.88,34.91,17.05,17,9.88]],['صالح بن محمد الجبري',[7.00,41.87,14.71,29,7.00]],['صلاح بن محمد البدير',[10.38,31.68,16.46,16,10.38]],['عاصم بن لقمان يونس الحكيم',[6.88,17.60,13.52,9,6.88]],['عبد الباري بن عوض الثبيتي',[8.75,33.58,16.89,10,8.75]],['عبد الحليم توميات',[5.13,25.65,18.78,14,5.13]],['عبد الحميد التركستاني',[4.25,41.40,14.71,18,4.25]],['عبد الحميد بن جعفر داغستاني',[5.50,18.35,16.62,10,5.50]],['عبد الرحمن بن الصادق القايدي',[14.75,24.45,14.54,11,14.75]],['عبد الرحمن بن عبد العزيز السديس',[20.00,38.25,13.42,36,20.00]],['عبد الرحمن بن علي العسكر',[5.25,30.72,19.30,11,5.25]],['عبد العزيز بن الطاهر بن غيث',[8.25,32.94,20.15,13,8.25]],['عبد العزيز بن عبد الفتاح قاري',[19.25,28.69,14.10,13,19.25]],['عبد العزيز بن عبد الله آل الشيخ',[32.50,44.52,15.41,16,32.50]],['عبد العزيز بن محمد القنام',[8.38,45.49,14.30,15,8.38]],['عبد الكريم بن صنيتان العمري',[5.63,17.97,9.27,10,5.63]],['عبد الله بن صالح القصير',[5.38,22.15,17.93,9,5.38]],['عبد الله بن محمد البصري',[15.38,32.33,12.74,21,15.38]],['عبد المجيد بن عبد العزيز الدهيشي',[7.50,24.19,16.30,8,7.50]],['عبد المحسن بن عبد الرحمن القاضي',[8.75,40.07,9.97,25,8.75]],['عبد المحسن بن محمد القاسم',[10.25,29.68,15.11,10,10.25]],['عثمان بن جمعة ضميرية',[5.25,18.03,9.27,10,5.25]],['عكرمة بن سعيد صبري',[9.00,27.64,10.35,13,9.00]],['علي بن عبد الرحمن الحذيفي',[18.88,35.18,24.75,4,18.88]],['فريح بن محمد الفريح',[6.00,16.82,8.32,4,6.00]],['ماجد بن عبد الرحمن الفريان',[5.50,35.38,10.34,24,5.50]],['مازن التويجري',[5.38,35.61,14.57,24,5.38]],['محمد أحمد حسين',[6.88,22.43,11.30,13,6.88]],['محمد بن صالح العثيمين',[15.50,16.97,10.44,8,15.50]],['مراد وعمارة',[4.75,23.44,10.50,17,4.75]],['مرزوق بن سالم الغامدي',[8.25,31.44,16.86,14,8.25]],['ناصر بن محمد الأحمد',[49.25,42.43,14.41,21,49.25]],['هاشم محمد علي المشهداني',[7.88,34.48,15.58,13,7.88]],['يوسف بن عبد الوهاب أبو سنينه',[8.25,33.58,9.56,21,8.25]]]; 

buttons_a = []
buttons_b = []
var select_a = document.getElementById("select_a")
var select_b = document.getElementById("select_b")

khateeb_data.forEach(function(khateeb, index) {

  if(index != 0){
  var option_a = document.createElement("option");
    option_a.text = khateeb[0];
    option_a.value = index;
  select_a.appendChild(option_a);
  }
  var option_b = document.createElement("option");
    option_b.text = khateeb[0];
    option_b.value = index;
  select_b.appendChild(option_b);
  
});

document.getElementById('radar-selectors').addEventListener('change', radar_changeEventHandler);

function radar_changeEventHandler(event) {
    if(event.target.value){
      const selectTrace = (event.target.id.slice(-1) == "a")?0:1
      Plotly.animate('radar-div', 
        {data: [{r:khateeb_data[event.target.value][1], name:khateeb_data[event.target.value][0]}], traces: [selectTrace]},
        {transition: {duration: 500, easing: 'cubic-in-out'}, frame: {duration: 500}}
      )
    }
}

trace1 = {
  r: khateeb_data[1][1], 
  fill: 'toself', fillcolor: 'rgba(0, 116, 217, 0.5)', 
  hoverinfo: 'r', 
  hoveron: 'points', 
  line: {color: '#001f3f'}, 
  marker: {color: '#0074D9'}, 
  mode: 'markers+lines', 
  name: khateeb_data[1][0], 
  theta: ['عدد الخطب', 'طول الخطبة', 'نسبة الإستدلال', 'عدد الكلمات المتفردة', 'عدد الخطب'], 
  type: 'scatterpolar'
};

trace2 = {
  r: khateeb_data[0][1], 
  fill: 'toself', 
  fillcolor: 'rgba(255, 133, 27, 0.5)', 
  hoverinfo: 'r', 
  hoveron: 'points', 
  line: {color: '#994700'}, 
  marker: {color: '#FF851B'}, 
  mode: 'markers+lines', 
  name: khateeb_data[0][0], 
  theta: ['عدد الخطب', 'طول الخطبة', 'نسبة الإستدلال', 'عدد الكلمات المتفردة', 'عدد الخطب'], 
  type: 'scatterpolar'
};

data = [trace1, trace2];

layout = {
  dragmode: false,
  clickmode: "none",
  autosize: true, 
  dragmode: false, 
  legend: {borderwidth: 0}, 
  polar: {
    angularaxis: {
      rotation: 45, 
      showgrid: true, 
      showline: true, 
      showticklabels: true, 
      tickformat: '', 
      ticks: 'outside', 
      type: 'category'
    }, 
    radialaxis: {
      angle: 0, 
      autorange: false, 
      nticks: 0, 
      range: [0, 50], 
      showgrid: true, 
      showline: false, 
      showticklabels: false, 
      ticks: "",
      type: 'linear'
    }, 
    sector: [0]
  }, 
  showlegend: true, 
  xaxis: {autorange: true}, 
  yaxis: {autorange: true},
};

config = {displayModeBar: false, responsive: true};
Plotly.react('radar-div', {data: data, layout: layout, config: config})
</script>

</body>
</html>
