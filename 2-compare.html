<html>
<head>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

<meta name="viewport" content="width=device-width, initial-scale=1">

  
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.bundle.min.js"></script>

<style>
  body {
    padding-top: 2em;
    overflow:hidden;
  }
  
  select {
    direction:rtl;
  }
</style>
</head>

<body>


<div id="radar-selectors" class="form-row">
  <div class="col">
    <select id="select_a" class="form-control"></select>
  </div>
  <div class="col">
    <select id="select_b" class="form-control"></select>
  </div>
</div>

<div id="radar-div"></div>

<script>
khateeb_data = [['متوسط الكل',[10.32,30.48,14.24,15,10.32]], ['أحمد بن حسين الفقيهي',[5,28.87,9.88,12,5]], ['أحمد فريد',[4.25,37.55,12.26,14,4.25]], ['أسامة بن عبدالله خياط',[12.88,23.66,13.89,7,12.88]], ['إبراهيم بن محمد الحقيل',[9.5,31.26,15.33,25,9.5]], ['إسماعيل الخطيب',[6.5,14.95,10.7,8,6.5]], ['حسين بن عبدالعزيز آل الشيخ',[12.75,30.57,11.42,10,12.75]], ['حمزة بن فايع الفتحي',[9.25,25.24,12.59,22,9.25]], ['خالد بن عبدالله المصلح',[5.63,27.57,17.57,10,5.63]], ['خالد بن محمد الشارخ',[4.25,35.52,12.63,18,4.25]], ['داود بن أحمد العلواني',[5.63,22.83,17.68,8,5.63]], ['سعد بن عبدالله العجمة الغامدي',[14.75,47.59,25.89,20,14.75]], ['سعود بن إبراهيم الشريم',[17.75,36.59,13.42,18,17.75]], ['سعيد بن عبدالباري بن عوض',[5.5,29.7,11.44,15,5.5]], ['سعيد بن يوسف شعلان',[7.75,39.34,14.87,23,7.75]], ['صالح بن عبدالله الهذلول',[7,26.76,11.59,19,7]], ['صالح بن عبدالله بن حميد',[17.88,36.26,13.21,19,17.88]], ['صالح بن محمد آل طالب',[9.88,34.91,17.05,17,9.88]], ['صالح بن محمد الجبري',[7,41.87,14.71,29,7]], ['صلاح بن محمد البدير',[10.38,31.68,16.46,16,10.38]], ['عاصم بن لقمان يونس الحكيم',[6.88,17.6,13.52,9,6.88]], ['عبدالباري بن عوض الثبيتي',[8.75,33.58,16.89,10,8.75]], ['عبدالحليم توميات',[5.13,25.65,18.78,14,5.13]], ['عبدالحميد التركستاني',[4.25,41.4,14.71,18,4.25]], ['عبدالحميد بن جعفر داغستاني',[5.5,18.35,16.62,10,5.5]], ['عبدالرحمن بن الصادق القايدي',[14.75,24.45,14.54,11,14.75]], ['عبدالرحمن بن عبدالعزيز السديس',[20,38.25,13.42,36,20]], ['عبدالرحمن بن علي العسكر',[5.25,30.72,19.3,11,5.25]], ['عبدالعزيز بن الطاهر بن غيث',[8.25,32.94,20.15,13,8.25]], ['عبدالعزيز بن عبدالفتاح قاري',[19.25,28.69,14.10,13,19.25]], ['عبدالعزيز بن عبدالله آل الشيخ',[32.5,44.52,15.41,16,32.5]], ['عبدالعزيز بن محمد القنام',[8.38,45.49,14.3,15,8.38]], ['عبدالكريم بن صنيتان العمري',[5.63,17.97,9.27,10,5.63]], ['عبدالله بن صالح القصير',[5.38,22.15,17.93,9,5.38]], ['عبدالله بن محمد البصري',[15.38,32.33,12.74,21,15.38]], ['عبدالمجيد بن عبدالعزيز الدهيشي',[7.5,24.19,16.3,8,7.5]], ['عبدالمحسن بن عبدالرحمن القاضي',[8.75,40.07,9.97,25,8.75]], ['عبدالمحسن بن محمد القاسم',[10.25,29.68,15.11,10,10.25]], ['عثمان بن جمعة ضميرية',[5.25,18.03,9.27,10,5.25]], ['عكرمة بن سعيد صبري',[9,27.64,10.35,13,9]], ['علي بن عبدالرحمن الحذيفي',[18.88,35.18,24.75,4,18.88]], ['فريح بن محمد الفريح',[6,16.82,8.32,4,6]], ['ماجد بن عبدالرحمن الفريان',[5.5,35.38,10.34,24,5.5]], ['مازن التويجري',[5.38,35.61,14.57,24,5.38]], ['محمد أحمد حسين',[6.88,22.43,11.3,13,6.88]], ['محمد بن صالح العثيمين',[15.5,16.97,10.44,8,15.5]], ['مراد وعمارة',[4.75,23.44,10.5,17,4.75]], ['مرزوق بن سالم الغامدي',[8.25,31.44,16.86,14,8.25]], ['ناصر بن محمد الأحمد',[49.25,42.43,14.41,21,49.25]], ['هاشم محمد علي المشهداني',[7.88,34.48,15.58,13,7.88]], ['يوسف بن عبدالوهاب أبو سنينه',[8.25,33.58,9.56,21,8.25]]];
buttons_a = []
buttons_b = []
var select_a = document.getElementById("select_a")
var select_b = document.getElementById("select_b")

khateeb_data.forEach(function(khateeb, index) {

  if(index != 0){
  var option_a = document.createElement("option");
    option_a.text = khateeb[0];
    option_a.value = index;
  select_a.appendChild(option_a);
  }
  var option_b = document.createElement("option");
    option_b.text = khateeb[0];
    option_b.value = index;
  select_b.appendChild(option_b);
  
});

document.getElementById('radar-selectors').addEventListener('change', radar_changeEventHandler);

function radar_changeEventHandler(event) {
    if(event.target.value){
      const selectTrace = (event.target.id.slice(-1) == "a")?0:1
      Plotly.animate('radar-div', 
        {data: [{r:khateeb_data[event.target.value][1], name:khateeb_data[event.target.value][0]}], traces: [selectTrace]},
        {transition: {duration: 500, easing: 'cubic-in-out'}, frame: {duration: 500}}
      )
    }
}

trace1 = {
  r: khateeb_data[1][1], 
  fill: 'toself', fillcolor: 'rgba(0, 116, 217, 0.5)', 
  hoverinfo: 'r', 
  hoveron: 'points', 
  line: {color: '#001f3f'}, 
  marker: {color: '#0074D9'}, 
  mode: 'markers+lines', 
  name: khateeb_data[1][0], 
  theta: ['عدد الخطب', 'طول الخطبة', 'نسبة الإستدلال', 'عدد الكلمات المتفردة', 'عدد الخطب'], 
  type: 'scatterpolar'
};

trace2 = {
  r: khateeb_data[0][1], 
  fill: 'toself', 
  fillcolor: 'rgba(255, 133, 27, 0.5)', 
  hoverinfo: 'r', 
  hoveron: 'points', 
  line: {color: '#994700'}, 
  marker: {color: '#FF851B'}, 
  mode: 'markers+lines', 
  name: khateeb_data[0][0], 
  theta: ['عدد الخطب', 'طول الخطبة', 'نسبة الإستدلال', 'عدد الكلمات المتفردة', 'عدد الخطب'], 
  type: 'scatterpolar'
};

data = [trace1, trace2];

layout = {
  dragmode: false,
  clickmode: "none",
  autosize: true, 
  dragmode: false, 
  legend: {borderwidth: 0}, 
  polar: {
    angularaxis: {
      rotation: 45, 
      showgrid: true, 
      showline: true, 
      showticklabels: true, 
      tickformat: '', 
      ticks: 'outside', 
      type: 'category'
    }, 
    radialaxis: {
      angle: 0, 
      autorange: false, 
      nticks: 0, 
      range: [0, 50], 
      showgrid: true, 
      showline: false, 
      showticklabels: false, 
      ticks: "",
      type: 'linear'
    }, 
    sector: [0]
  }, 
  showlegend: true, 
  xaxis: {autorange: true}, 
  yaxis: {autorange: true},
};

config = {displayModeBar: false, responsive: true};
Plotly.react('radar-div', {data: data, layout: layout, config: config})
</script>

</body>
</html>
