<html>
<head>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js"></script>
<script src="https://unpkg.com/d3@5.4.0/dist/d3.min.js"></script>
<script src="https://unpkg.com/enter-view@1.0.0/enter-view.min.js"></script>
<script src="https://unpkg.com/stickyfilljs@2.0.5/dist/stickyfill.js"></script>

<style>

#scrolly-side {
  width: 98vw;
  position: relative;
  left: 50%;
  right: 50%;
  margin-left: -50vw;
  margin-right: -50vw;
}

#scrolly-side .scrolly {
  display: flex;
  max-width: 85rem;
  margin: 3rem auto;
  padding: 1rem;
}

#scrolly-side .scrolly > * {
  flex: 1;
}

#scrolly-side .scrolly article {
  padding-right: 1rem;
  max-width: 25rem;
}

#scrolly-side .scrolly article .step {
  min-height: 90vh;
  margin-bottom: 1rem;
  transition: background-color 250ms ease-in-out;
}

#scrolly-side .scrolly article .step:last-of-type {
  margin-bottom: 0;
}

#scrolly-side .scrolly article .step.is-active p {
  background-color: #ccc;
}

#scrolly-side .scrolly article .step p {
  margin: 0;
  padding: 1rem;
  text-align: right;
  font-weight: 400;
  direction: rtl;
}

#scrolly-side .scrolly figure.sticky {
  position: sticky;
  width: 100%;
  height: 80vh;
  background: #969696;
  margin: 0;
  top: 10vh;
  left: 0;
}
#scrolly-side .scrolly figure.sticky .bar-outer {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 100%;
  height: 100%;
}
</style>

</head>

<body>


<section id='scrolly-side'>
  <div class='scrolly'>
    
    <!--  step text   -->
	  <article>
      <div class='step' data-stage='first' data-index='0'>
          <p>عند استعراضك لخطب الشيخ عبدالرحمن السديس واضعا طول الخطبة في المحور السيني ونسبة الاستدلال في الخطبة في المحور الصادي ستجد توزيع متناثر للخطب لا يشير إلى سلوك أو أساس يوضح آلية كتابة الشيخ لخطبه.</p>
      </div>
      <div class='step' data-stage='second' data-index='1'>
         <p>مع مزيد من التمحيص اتضح أن هذه الخطب مقسمة على جامعين وهم جامع الفرقان والمسجد الحرام وعند تلوين هذه الخطب يمكنك بوضوح رؤية الاختلاف في الكتابة بين الجامعين مما يفسر هذا الإختلاف. ماذا لو لم نملك معلومة الجوامع؟ كيف بإمكاننا تمييز هذا الإختلاف دون معاينة البيانات كل مرة؟
	 
	 اللون الأحمر يمثل جامع الفرقان والرمادي يمثل المسجد الحرام</p>
      </div>
      <div class='step' data-stage='third' data-index='2'>
        <p>التجميع بالمتوسطات (K-Means Clustering) هو احدى وسائل تصنيف البيانات بحساب التقارب والتباعد ووضع النقاط المتقاربة في مجموعة. تقوم الخوارزمية بتجميع المتجهات عن طريق استحداث نقاط أولية وحساب المسافة الاقليدية بينها وبين البيانات لتشكيل مجموعة ومواصلة تحسين هذه العملية حتى تصل للتجميع النهائي. 
	
	اللون الأحمر يمثل التجميع الأول والرمادي يمثل التجميع الثاني</p>
      </div>
	  </article>
    
     <!--  sticky graphic   -->
<figure class='sticky'>
  <div id="sudais" class='bar-outer'></div>
</figure>
    
  </div>
  
</section>


<script>

sudais_colors = [[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1], [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1], [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,1,1,1,1,0,0,1,1,0,1,1,1,1,0,1,1,0,0,1,1,1,1,0,0,1,1,1,1,1,1,1,0,1,0,1,1,0,1,1,0,0]]

var frames = [
  {name: 'first', data: [{marker: {color:sudais_colors[0]}}]},
  {name: 'second', data: [{marker: {color:sudais_colors[1]}}]},
  {name: 'third', data: [{marker: {color:sudais_colors[2]}}]},
];


trace1 = {
  x: [2159,2661,3132,2459,2161,2962,2532,2012,4035,2095,5681,4347,2444,4638,2419,2243,2340,2224,2719,2040,2262,2478,2785,1912,2090,2246,2012,2070,1971,2434,1946,2157,2210,2306,1855,1875,2481,2348,2366,5054,1786,2493,2079,2769,1990,1965,1886,2250,2413,2523,2420,3761,2508,2814,2416,2408,1749,2217,1687,1988,2045,2158,1825,2499,2171,1860,2084,2077,1859,1636,1885,2146,1621,1826,1866,2488,2558,2229,1730,2037,1512,1707,2002,1782,2416,2158,1666,1648,1732,1572,1242,1756,1497,3342,1507,1590,1314,1412,1356,1434,1465,1606,1537,1490,1613,1552,1413,1485,1625,1511,1853,1438,863,1333,1791,1013,983,1264,895,816,1145,1489,2374,1703,1199,1478,1694,1580,1653,1729,1422,1006,2152,1013,1695,1719,1218,1384,1136,1564,1875,1349,1064,1345,1113,1303,910,1175,1078,957,1150,1480,1037,1414,1226,1363,905,1048,785], 
  y: [8.93,7,4.32,7.82,2.30,5.31,6.51,8.13,11.29,6.42,8.57,10.16,15.79,5.36,7.05,8.30,7.22,5.77,10.64,6.53,2.45,6.37,4.74,8.87,7.61,12.18,12.40,8.29,7.24,7.70,7.07,5.47,3.76,7.49,7.24,9.97,4.81,7.33,8.47,10.23,5.25,11.31,6.86,5.45,3.61,7.24,4.76,8.60,8.51,11.43,12.96,10.09,5.87,11.59,10.30,8.80,2.87,7.75,10.44,4.80,9.14,5.69,9.92,5.56,4.97,5.93,11.48,12,6.56,8.91,9.21,14.54,10.40,12.94,10.72,5.71,6.79,6.90,6.63,7.28,5.34,6.84,3.43,3.95,9.10,6.23,7.21,9.23,6.96,9.80,1.54,9.81,13.16,11.49,8.44,11.52,7.82,9.03,12.04,10.13,10.93,10.20,20.68,5.75,11.74,4.31,6.56,4.04,4.75,10.08,5.57,8.78,2.94,2.87,30.18,13.63,39.53,14.08,49.58,58.04,35.91,23.44,15.96,18.74,20.66,24.72,17.41,47.04,49.22,26.32,26.05,13.02,35.78,47.75,17.04,13.30,60.78,31.22,19.15,27.82,16.78,16.25,48.97,21.40,42.59,27.08,36.10,23.09,31.15,1.80,18.95,14.69,18.18,24.90,17.74,38.42,25.83,16.68,12.13], 
  fill: 'none', 
  hoverinfo: 'text', 
  marker: {
    cauto: true, 
    color: sudais_colors[0], 
    colorscale: [['0', '#999'], ['1', '#e41a1c']], 
    size: 10, 
    symbol: 'circle'
  }, 
  mode: 'markers', 
  name: 'trace 0', 
  showlegend: false, 
  text: ['الدعوة إلى الله بالإنترنت', 'ترشيد الإجازة الصيفية', 'عقبات في طريق الزواج', 'حرب الشائعات', 'وداع رمضان', 'منزلة الصلاة في الإسلام', 'حضارتنا وحضارتهم', 'خطبة استسقاء 2/12/1422هـ', 'عيد الأضحى 1418هـ: تحديات ومآسي وبشائر', 'يوم الحج الأكبر', 'عيد الأضحى 1412هـ', 'عيد الأضحى 1408هـ', 'عيد الأضحى 1404هـ', 'عيد الأضحى 1420هـ', 'الأقصى بين العدوان المشين والخذلان المهين', 'تعريف الأنام بوسطية وعدل الإسلام', 'الشمائل المحمدية', 'المسؤولية في الإسلام', 'خطر السحر والشعوذة', 'دروس من الهجرة النبوية', 'وقفات مع السفر والمسافرين', 'ظاهرة العنوسة والعزوبة', 'المشروع الحضاري الإسلامي', 'ظاهرة التفكك الأسري', 'سلام عليك يا رمضان', 'الإعلام بمحاسن الإسلام', 'إنك في رِحاب الحرم الآمن', 'خطبة استسقاء 16/9/1423هـ', 'خطبة استسقاء 5/2/1424هـ', 'كلمات الأزمات', 'هُبّوا للعمل الإغاثي', 'كساد الفساد في بلاد الأمجاد', 'شبابنا والإجازة', 'يا أهل الجزيرة', 'مآثر شهر القرآن', 'الصدور من سيّد الشهور', 'التشنيع على غلاة التجريح والتبديع', 'الإجازة الصيفية والسفر إلى الخارج', 'حرب المفاهيم', 'عيد الأضحى 1424هـ', 'الأمة الإسلامية بين الأنفاق والآفاق', 'تشديد النكير على التفجير الحقير', 'خطبة استسقاء 11/2/1425هـ', 'ضوابط التكفير', 'الدروس المهمة في الفتن المدلهمّة', 'المخرج من فِتنتَي التغريب والتخريب', 'الأمن الفكري', 'رمضان وحال الأمّة', 'دعوة للحسنى', 'قضيّة مسلّمة', 'نسائم الحج', 'عيد الأضحى 1425هـ', 'دروس من التاريخ الإسلامي', 'المواطنة والإصلاح', 'حديث عن المصطفى المختار', 'ولذكر الله أكبر', 'لمحات في استثمار الإجازات', 'العفة بين أعاصير الفضائيات وطوفان الإنترنت', 'عبرات المقلتين في وفاة خادم الحرمين', 'كلمات للمعلمين والمعلمات', 'روح الصيام', 'العلاقة الشرعية بين الراعي والرعية', 'أم القرى', 'يا أمّة المليار', 'اقرؤوا التأريخ', 'الأمة الإسلامية آلام وآمال', 'قبسات من سراج الحج', 'تحذير العباد من ضروب الفساد', 'إسعاف ذوي الحاجات', 'فضل الوقف وأهميته', 'وفاق مكة المكرمة', 'تذكير الجماعة بأشراط الساعة', 'ميرة رمضان', 'مقصد حفظ النفس', 'إنجازان تأريخيان', 'خطبة استسقاء 8/10/1426هـ', 'خطبة استسقاء 13/8/1422هـ', 'وفاة المصطفى', 'تجارة الكذب', 'وسائل الاتصالات الحديثة: أحكام وآداب', 'فقه الترويح', 'التحذير من حوادث السير', 'الأجور الغفيرة في اغتنام العشر الأخيرة', 'الإنارة لطريق الحضارة', 'التشنيف ببيان مفاسد التصنيف', 'اليوم الأغر', 'كارثة السيول بين السائل والمسؤول', 'النصر المبين على عدوان المعتدين', 'التحذير من التحايل على شرع الله', 'أهمية المواعظ', 'إرشاد التقي لاغتنام ما بقي', 'العمل الخيري', 'جواهر الحج', 'خطبة عيد الأضحى 1431هـ', 'حاجة الأمة لعلو الهمة', 'التعريف بالرقاة الصادقين وأهل التزييف', 'الحب الصادق', 'وجوب الاجتماع ونبذ الفرقة', 'لزوم الجماعة', 'الغيرة على الأعراض', 'إنه رمضان', 'القيم الإسلامية', 'بوارق الفجر وتباشير النصر', 'نعمة الأمن واستقبال شهر رمضان', 'كلمة التوحيد', 'أهمية اللغة العربية', 'خطورة تقديم العقل على النقل', 'أهلا بشهر الصوم', 'أهمية الوحدة بين المسلمين', 'عام أفل وعام أهلّ', 'بر الوالدين', 'الأمر بالإعراض عن الطعن في الأعراض', 'فخ العولمة', 'الدعوة إلى تحرير المرأة', 'الحكمة من كسوف الشمس', 'المجادلة بالباطل في آيات الله', 'واجبنا نحو القرآن الكريم', 'من وصايا رسول الله صلى الله عليه وسلم', 'آصرة الإيمان', 'هوان الدنيا على الله', 'تحكيم شرع الله', 'فضل العشر من ذي الحجة', 'سورة النور', 'من صور الفتن', 'أهمية الوقت', 'أسماء الله الحسنى', 'الأمر بالمعروف والنهي عن المنكر ومنزلته في الدين', 'التقول على رسول الله', 'الجنة وصفات أهلها', 'الحج', 'الصدقة', 'وماذا بعد رمضان', 'الطاعات', 'الهجرة', 'امتحان الخوف والجوع', 'حرمة المسلم', 'قصة نوح', 'شرح كلمة أبى سليمان الداراني عن ركني السعادة', 'ظلم العمال', 'عاشوراء', 'علامات حسن الخلق', 'فضل ليلة القدر', 'ميزان العقيدة', 'وفاة الرسول عليه الصلاة والسلام', 'حال المسلم بين السعة والضيق', 'المنافقون', 'الصحابة1', 'الصحابة2', 'الصلاة على النبي', 'الصلاة على النبي صلى الله عليه وسلم', 'الصلاة على النبي ومواضعها', 'حوادث السيارات', 'شهور العام', 'إلا بحبل من الله وحبل من الناس', 'في واجبنا نحو فلسطين', 'في مقدمات النصر القادم', 'المطر', 'صيغ الصلاة على النبي', 'السعادة'], 
  type: 'scatter', 
  visible: true, 
};

data = [trace1];
layout = {
  autosize: true, 
  dragmode: false,
  showlegend: false, 
  title: {text: 'مقارنة خطب السديس'}, 
  xaxis: {
    autorange: true, 
    fixedrange: true, 
    range: [495.505788526, 5970.49421147], 
    showline: false, 
    ticks: '', 
    title: {text: 'طول الخطبة بالكلمات'}, 
    type: 'linear'
  }, 
  yaxis: {
    autorange: true, 
    fixedrange: true, 
    nticks: 0, 
    range: [-2.75327649208, 65.0732764921], 
    showline: false, 
    showticksuffix: 'all', 
    tickmode: 'auto', 
    ticks: '', 
    ticksuffix: '%', 
    title: {text: 'متوسط نسبة الإقتباس'}, 
    type: 'linear'
  },
  hovermode: "closest"
};

config = {displayModeBar: false, responsive: true};

Plotly.plot('sudais', {
  data: data,
  layout: layout,
  config: config
}).then(function() {
  Plotly.addFrames('sudais', frames);
});

const container = d3.select('#scrolly-side');
const stepSel = container.selectAll('.step');

function updateChart(index) {
	const sel = container.select(`[data-index='${index}']`);
	const message = sel.attr('data-index');
	stepSel.classed('is-active', (d, i) => i === index);
	//container.select('.bar-outer').text(message)
  Plotly.animate('sudais', [sel.attr('data-stage')]);
}


Stickyfill.add(d3.select('.sticky').node());
enterView({
	selector: stepSel.nodes(),
	offset: 0.5,
	enter: el => {
		const index = +d3.select(el).attr('data-index');
		updateChart(index);
	},
	exit: el => {
		let index = +d3.select(el).attr('data-index');
		index = Math.max(0, index - 1);
		updateChart(index);
	}
});

</script>



</body>
</html>
